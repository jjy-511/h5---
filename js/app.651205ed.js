(function(){"use strict";var t={583:function(t,e,a){var n=a(5130),s=a(6768);const o={id:"app"},r={class:"app-header"},i={class:"app-nav"},c={class:"app-content"};function l(t,e,a,n,l,u){const d=(0,s.g2)("router-link"),p=(0,s.g2)("router-view");return(0,s.uX)(),(0,s.CE)("div",o,[(0,s.Lk)("header",r,[e[3]||(e[3]=(0,s.Lk)("h1",{class:"app-title"},"个人记账本@55220831蒋金佑",-1)),(0,s.Lk)("nav",i,[(0,s.bF)(d,{to:"/","exact-active-class":"active"},{default:(0,s.k6)((()=>e[0]||(e[0]=[(0,s.eW)("我要记账")]))),_:1}),(0,s.bF)(d,{to:"/records","exact-active-class":"active"},{default:(0,s.k6)((()=>e[1]||(e[1]=[(0,s.eW)("账单记录")]))),_:1}),(0,s.bF)(d,{to:"/stats","exact-active-class":"active"},{default:(0,s.k6)((()=>e[2]||(e[2]=[(0,s.eW)("统计图表")]))),_:1})])]),(0,s.Lk)("main",c,[(0,s.bF)(p)]),e[4]||(e[4]=(0,s.Lk)("footer",{class:"app-footer"},[(0,s.Lk)("p",null,"轻松管理你的收支，让生活更轻松！")],-1))])}var u={name:"App"},d=a(1241);const p=(0,d.A)(u,[["render",l],["__scopeId","data-v-698b229d"]]);var f=p,h=a(1387),v=a(4232);const m={class:"home"};function b(t,e,a,n,o,r){const i=(0,s.g2)("Form");return(0,s.uX)(),(0,s.CE)("div",m,[e[0]||(e[0]=(0,s.Lk)("h1",null,"进行记账",-1)),(0,s.bF)(i),(0,s.Lk)("p",null,"当前余额："+(0,v.v_)(r.balance)+" 元",1)])}const k={class:"form-group"},g={class:"form-group"},y={class:"form-group"};function L(t,e,a,o,r,i){return(0,s.uX)(),(0,s.CE)("form",{class:"transaction-form",onSubmit:e[3]||(e[3]=(0,n.D$)(((...t)=>i.submitTransaction&&i.submitTransaction(...t)),["prevent"]))},[(0,s.Lk)("div",k,[e[4]||(e[4]=(0,s.Lk)("label",{for:"amount"},"金额：",-1)),(0,s.bo)((0,s.Lk)("input",{id:"amount",type:"number","onUpdate:modelValue":e[0]||(e[0]=t=>r.amount=t),required:"",placeholder:"请输入金额"},null,512),[[n.Jo,r.amount]])]),(0,s.Lk)("div",g,[e[6]||(e[6]=(0,s.Lk)("label",{for:"type"},"类别：",-1)),(0,s.bo)((0,s.Lk)("select",{id:"type","onUpdate:modelValue":e[1]||(e[1]=t=>r.type=t),required:""},e[5]||(e[5]=[(0,s.Lk)("option",{value:"",disabled:""},"请选择类别",-1),(0,s.Lk)("option",{value:"收入"},"收入",-1),(0,s.Lk)("option",{value:"支出"},"支出",-1)]),512),[[n.u1,r.type]])]),(0,s.Lk)("div",y,[e[7]||(e[7]=(0,s.Lk)("label",{for:"note"},"备注：",-1)),(0,s.bo)((0,s.Lk)("input",{id:"note",type:"text","onUpdate:modelValue":e[2]||(e[2]=t=>r.note=t),placeholder:"请输入备注"},null,512),[[n.Jo,r.note]])]),e[8]||(e[8]=(0,s.Lk)("button",{class:"submit-button",type:"submit"},"提交",-1))],32)}var P={data(){return{amount:0,type:"",note:""}},methods:{submitTransaction(){const t={amount:this.amount,type:this.type,note:this.note,date:(new Date).toISOString()};this.$store.dispatch("addTransaction",t),this.amount=0,this.note=""}}};const C=(0,d.A)(P,[["render",L],["__scopeId","data-v-642bf79a"]]);var _=C,T={components:{Form:_},computed:{balance(){return this.$store.state.balance}},created(){this.$store.dispatch("fetchTransactions")}};const x=(0,d.A)(T,[["render",b],["__scopeId","data-v-94a7be68"]]);var w=x;const E={class:"records"};function O(t,e,a,n,o,r){const i=(0,s.g2)("List");return(0,s.uX)(),(0,s.CE)("div",E,[e[0]||(e[0]=(0,s.Lk)("h1",{style:{"text-align":"center","font-size":"36px"}},"账单记录",-1)),(0,s.bF)(i)])}const j={class:"transaction-list"},I={class:"filter-section"},$={class:"transaction-details"},A={class:"transaction-info"},F={class:"transaction-date"},X={class:"transaction-type"},S={class:"transaction-amount"},B={key:0,class:"transaction-note"},U=["onClick"],V={class:"pagination"},J=["disabled"],D=["disabled"];function R(t,e,a,o,r,i){return(0,s.uX)(),(0,s.CE)("div",j,[(0,s.Lk)("div",I,[e[6]||(e[6]=(0,s.Lk)("label",{for:"type"},"按类型筛选：",-1)),(0,s.bo)((0,s.Lk)("select",{"onUpdate:modelValue":e[0]||(e[0]=t=>r.filters.type=t),id:"type"},e[5]||(e[5]=[(0,s.Lk)("option",{value:""},"全部",-1),(0,s.Lk)("option",{value:"收入"},"收入",-1),(0,s.Lk)("option",{value:"支出"},"支出",-1)]),512),[[n.u1,r.filters.type]]),e[7]||(e[7]=(0,s.Lk)("label",{for:"note"},"按备注筛选：",-1)),(0,s.bo)((0,s.Lk)("input",{type:"text","onUpdate:modelValue":e[1]||(e[1]=t=>r.filters.note=t),id:"note",placeholder:"输入备注"},null,512),[[n.Jo,r.filters.note]]),e[8]||(e[8]=(0,s.Lk)("label",{for:"date"},"按日期筛选：",-1)),(0,s.bo)((0,s.Lk)("input",{type:"date","onUpdate:modelValue":e[2]||(e[2]=t=>r.filters.date=t),id:"date"},null,512),[[n.Jo,r.filters.date]])]),(0,s.Lk)("ul",null,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(i.paginatedTransactions,((t,e)=>((0,s.uX)(),(0,s.CE)("li",{key:e,class:"transaction-item"},[(0,s.Lk)("div",$,[(0,s.Lk)("p",A,[(0,s.Lk)("span",F,(0,v.v_)(t.date),1),(0,s.Lk)("span",X,(0,v.v_)(t.type)+":",1),(0,s.Lk)("span",S,(0,v.v_)(t.amount)+"元",1),t.note?((0,s.uX)(),(0,s.CE)("span",B,"("+(0,v.v_)(t.note)+")",1)):(0,s.Q3)("",!0)])]),(0,s.Lk)("button",{class:"delete-button",onClick:e=>i.deleteTransaction(t.id)},"删除",8,U)])))),128))]),(0,s.Lk)("div",V,[(0,s.Lk)("button",{onClick:e[3]||(e[3]=t=>i.changePage(r.currentPage-1)),disabled:1===r.currentPage},"上一页",8,J),(0,s.Lk)("span",null,"第 "+(0,v.v_)(r.currentPage)+" 页",1),(0,s.Lk)("button",{onClick:e[4]||(e[4]=t=>i.changePage(r.currentPage+1)),disabled:r.currentPage===i.totalPages},"下一页",8,D)])])}var W={data(){return{currentPage:1,itemsPerPage:5,filters:{type:"",note:"",date:""}}},computed:{transactions(){return this.$store.state.transactions.filter((t=>{const e=new Date(t.date).toISOString().split("T")[0];return(!this.filters.type||t.type===this.filters.type)&&(!this.filters.note||t.note.includes(this.filters.note))&&(!this.filters.date||e===this.filters.date)}))},totalPages(){return Math.ceil(this.transactions.length/this.itemsPerPage)},paginatedTransactions(){const t=(this.currentPage-1)*this.itemsPerPage,e=this.currentPage*this.itemsPerPage;return this.transactions.slice(t,e)}},methods:{deleteTransaction(t){this.$store.dispatch("deleteTransaction",t)},changePage(t){t>=1&&t<=this.totalPages&&(this.currentPage=t)}},created(){this.$store.dispatch("fetchTransactions")}};const q=(0,d.A)(W,[["render",R],["__scopeId","data-v-3ee8cc66"]]);var z=q,M={components:{List:z},created(){this.$store.dispatch("fetchTransactions")}};const H=(0,d.A)(M,[["render",O],["__scopeId","data-v-3afb9756"]]);var K=H;const Q={class:"stats"};function G(t,e,a,n,o,r){return(0,s.uX)(),(0,s.CE)("div",Q,e[0]||(e[0]=[(0,s.Fv)('<h1 style="font-size:36px;" data-v-a093c0ce>统计数据</h1><div class="chart-container" data-v-a093c0ce><canvas id="barChart" data-v-a093c0ce></canvas></div><div class="chart-container" data-v-a093c0ce><canvas id="pieChart" data-v-a093c0ce></canvas></div>',3)]))}var N=a(2344),Y={computed:{income(){return this.$store.state.transactions.filter((t=>"收入"===t.type)).reduce(((t,e)=>t+e.amount),0)},expense(){return this.$store.state.transactions.filter((t=>"支出"===t.type)).reduce(((t,e)=>t+e.amount),0)},categoryExpenses(){return this.$store.state.transactions.filter((t=>"支出"===t.type)).reduce(((t,e)=>(t[e.note]||(t[e.note]=0),t[e.note]+=e.amount,t)),{})}},mounted(){this.renderBarChart(),this.renderPieChart()},methods:{renderBarChart(){const t=document.getElementById("barChart").getContext("2d");new N.t1(t,{type:"bar",data:{labels:["收入","支出"],datasets:[{label:"金额",data:[this.income,this.expense],backgroundColor:["green","red"]}]},options:{responsive:!0,maintainAspectRatio:!1}})},renderPieChart(){const t=document.getElementById("pieChart").getContext("2d"),e=Object.values(this.categoryExpenses),a=Object.keys(this.categoryExpenses);new N.t1(t,{type:"pie",data:{labels:a,datasets:[{data:e,backgroundColor:["#ff6384","#36a2eb","#cc65fe","#ffce56"]}]},options:{responsive:!0,maintainAspectRatio:!1}})}}};const Z=(0,d.A)(Y,[["render",G],["__scopeId","data-v-a093c0ce"]]);var tt=Z;const et=[{path:"/",name:"Home",component:w},{path:"/records",name:"Records",component:K},{path:"/stats",name:"Stats",component:tt}],at=(0,h.aE)({history:(0,h.LA)(),routes:et});var nt=at,st=a(782),ot=a(1514);const rt=(0,ot.P2)("budget-app",1,{upgrade(t){const e=t.createObjectStore("transactions",{keyPath:"id",autoIncrement:!0});e.createIndex("date","date")}});var it=(0,st.y$)({state:{transactions:[],balance:0},mutations:{setTransactions(t,e){t.transactions=e},updateBalance(t){const e=t.transactions.filter((t=>"收入"===t.type)).reduce(((t,e)=>t+e.amount),0),a=t.transactions.filter((t=>"支出"===t.type)).reduce(((t,e)=>t+e.amount),0);t.balance=e-a}},actions:{async addTransaction({dispatch:t},e){const a=await rt;await a.add("transactions",e),t("fetchTransactions")},async fetchTransactions({commit:t}){const e=await rt,a=await e.getAll("transactions");t("setTransactions",a),t("updateBalance")},async deleteTransaction({dispatch:t},e){const a=await rt;await a.delete("transactions",e),t("fetchTransactions")}}});(0,n.Ef)(f).use(it).use(nt).mount("#app")}},e={};function a(n){var s=e[n];if(void 0!==s)return s.exports;var o=e[n]={exports:{}};return t[n].call(o.exports,o,o.exports,a),o.exports}a.m=t,function(){var t=[];a.O=function(e,n,s,o){if(!n){var r=1/0;for(u=0;u<t.length;u++){n=t[u][0],s=t[u][1],o=t[u][2];for(var i=!0,c=0;c<n.length;c++)(!1&o||r>=o)&&Object.keys(a.O).every((function(t){return a.O[t](n[c])}))?n.splice(c--,1):(i=!1,o<r&&(r=o));if(i){t.splice(u--,1);var l=s();void 0!==l&&(e=l)}}return e}o=o||0;for(var u=t.length;u>0&&t[u-1][2]>o;u--)t[u]=t[u-1];t[u]=[n,s,o]}}(),function(){a.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return a.d(e,{a:e}),e}}(),function(){a.d=function(t,e){for(var n in e)a.o(e,n)&&!a.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})}}(),function(){a.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){a.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){var t={524:0};a.O.j=function(e){return 0===t[e]};var e=function(e,n){var s,o,r=n[0],i=n[1],c=n[2],l=0;if(r.some((function(e){return 0!==t[e]}))){for(s in i)a.o(i,s)&&(a.m[s]=i[s]);if(c)var u=c(a)}for(e&&e(n);l<r.length;l++)o=r[l],a.o(t,o)&&t[o]&&t[o][0](),t[o]=0;return a.O(u)},n=self["webpackChunk_55220831jjy"]=self["webpackChunk_55220831jjy"]||[];n.forEach(e.bind(null,0)),n.push=e.bind(null,n.push.bind(n))}();var n=a.O(void 0,[504],(function(){return a(583)}));n=a.O(n)})();
//# sourceMappingURL=app.651205ed.js.map